{
  "version": 3,
  "sources": ["../../../src/links/zk-bag.ts"],
  "sourcesContent": ["// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport type {\n\tTransactionArgument,\n\tTransactionBlock,\n\tTransactionObjectArgument,\n} from '@mysten/sui.js/transactions';\n\nexport interface ZkBagContractOptions {\n\tpackageId: string;\n\tbagStoreId: string;\n\tbagStoreTableId: string;\n}\n\nexport const MAINNET_CONTRACT_IDS: ZkBagContractOptions = {\n\tpackageId: '0x5bb7d0bb3240011336ca9015f553b2646302a4f05f821160344e9ec5a988f740',\n\tbagStoreId: '0x65b215a3f2a951c94313a89c43f0adbd2fd9ea78a0badf81e27d1c9868a8b6fe',\n\tbagStoreTableId: '0x616db54ca564660cd58e36a4548be68b289371ef2611485c62c374a60960084e',\n};\n\nexport class ZkBag<IDs> {\n\t#package: string;\n\t#module = 'zk_bag' as const;\n\tids: IDs;\n\n\tconstructor(packageAddress: string, ids: IDs) {\n\t\tthis.#package = packageAddress;\n\t\tthis.ids = ids;\n\t}\n\n\tnew(\n\t\ttxb: TransactionBlock,\n\t\t{\n\t\t\targuments: [store, receiver],\n\t\t}: {\n\t\t\targuments: [\n\t\t\t\tstore: TransactionObjectArgument | string,\n\t\t\t\treceiver: TransactionArgument | string,\n\t\t\t];\n\t\t},\n\t) {\n\t\ttxb.moveCall({\n\t\t\ttarget: `${this.#package}::${this.#module}::new`,\n\t\t\targuments: [\n\t\t\t\ttxb.object(store),\n\t\t\t\ttypeof receiver === 'string' ? txb.pure.address(receiver) : receiver,\n\t\t\t],\n\t\t});\n\t}\n\n\tadd(\n\t\ttxb: TransactionBlock,\n\t\t{\n\t\t\targuments: [store, receiver, item],\n\t\t\ttypeArguments,\n\t\t}: {\n\t\t\targuments: [\n\t\t\t\tstore: TransactionObjectArgument | string,\n\t\t\t\treceiver: TransactionArgument | string,\n\t\t\t\titem: TransactionObjectArgument | string,\n\t\t\t];\n\t\t\ttypeArguments: [string];\n\t\t},\n\t): Extract<TransactionArgument, { kind: 'Result' }> {\n\t\treturn txb.moveCall({\n\t\t\ttarget: `${this.#package}::${this.#module}::add`,\n\t\t\targuments: [\n\t\t\t\ttxb.object(store),\n\t\t\t\ttypeof receiver === 'string' ? txb.pure.address(receiver) : receiver,\n\t\t\t\ttxb.object(item),\n\t\t\t],\n\t\t\ttypeArguments: typeArguments,\n\t\t});\n\t}\n\n\tinit_claim(\n\t\ttxb: TransactionBlock,\n\t\t{\n\t\t\targuments: [store],\n\t\t}: {\n\t\t\targuments: [store: TransactionObjectArgument | string];\n\t\t},\n\t) {\n\t\tconst [bag, claimProof] = txb.moveCall({\n\t\t\ttarget: `${this.#package}::${this.#module}::init_claim`,\n\t\t\targuments: [txb.object(store)],\n\t\t});\n\n\t\treturn [bag, claimProof] as const;\n\t}\n\n\treclaim(\n\t\ttxb: TransactionBlock,\n\t\t{\n\t\t\targuments: [store, receiver],\n\t\t}: {\n\t\t\targuments: [\n\t\t\t\tstore: TransactionObjectArgument | string,\n\t\t\t\treceiver: TransactionArgument | string,\n\t\t\t];\n\t\t},\n\t) {\n\t\tconst [bag, claimProof] = txb.moveCall({\n\t\t\ttarget: `${this.#package}::${this.#module}::reclaim`,\n\t\t\targuments: [\n\t\t\t\ttxb.object(store),\n\t\t\t\ttypeof receiver === 'string' ? txb.pure.address(receiver) : receiver,\n\t\t\t],\n\t\t});\n\n\t\treturn [bag, claimProof] as const;\n\t}\n\n\tclaim(\n\t\ttxb: TransactionBlock,\n\t\t{\n\t\t\targuments: [bag, claim, id],\n\t\t\ttypeArguments,\n\t\t}: {\n\t\t\targuments: [\n\t\t\t\tbag: TransactionObjectArgument | string,\n\t\t\t\tclaim: Extract<TransactionArgument, { kind: 'NestedResult' }>,\n\t\t\t\tid: TransactionObjectArgument | string,\n\t\t\t];\n\t\t\ttypeArguments: [string];\n\t\t},\n\t): Extract<TransactionArgument, { kind: 'Result' }> {\n\t\treturn txb.moveCall({\n\t\t\ttarget: `${this.#package}::${this.#module}::claim`,\n\t\t\targuments: [txb.object(bag), txb.object(claim), typeof id === 'string' ? txb.object(id) : id],\n\t\t\ttypeArguments,\n\t\t});\n\t}\n\n\tfinalize(\n\t\ttxb: TransactionBlock,\n\t\t{\n\t\t\targuments: [bag, claim],\n\t\t}: {\n\t\t\targuments: [\n\t\t\t\tbag: TransactionObjectArgument | string,\n\t\t\t\tclaim: Extract<TransactionArgument, { kind: 'NestedResult' }>,\n\t\t\t];\n\t\t},\n\t) {\n\t\ttxb.moveCall({\n\t\t\ttarget: `${this.#package}::${this.#module}::finalize`,\n\t\t\targuments: [txb.object(bag), txb.object(claim)],\n\t\t});\n\t}\n\n\tupdate_receiver(\n\t\ttxb: TransactionBlock,\n\t\t{\n\t\t\targuments: [bag, from, to],\n\t\t}: {\n\t\t\targuments: [\n\t\t\t\tbag: TransactionObjectArgument | string,\n\t\t\t\tfrom: TransactionArgument | string,\n\t\t\t\tto: TransactionArgument | string,\n\t\t\t];\n\t\t},\n\t) {\n\t\ttxb.moveCall({\n\t\t\ttarget: `${this.#package}::${this.#module}::update_receiver`,\n\t\t\targuments: [\n\t\t\t\ttxb.object(bag),\n\t\t\t\ttypeof from === 'string' ? txb.pure.address(from) : from,\n\t\t\t\ttypeof to === 'string' ? txb.pure.address(to) : to,\n\t\t\t],\n\t\t});\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
